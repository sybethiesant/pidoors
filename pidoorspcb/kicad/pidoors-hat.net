(export (version "E")
  (design
    (source "/pidoorspcb/kicad/pidoors-hat.kicad_sch")
    (date "2026-01-09")
    (tool "PiDoors HAT Generator 2.0")
  )
  (components
    (comp (ref "J1")
      (value "Raspberry_Pi_2_3")
      (footprint "Connector_PinSocket_2.54mm:PinSocket_2x20_P2.54mm_Vertical")
      (datasheet "https://www.raspberrypi.com/documentation/computers/raspberry-pi.html")
      (fields (field (name "Description") "Raspberry Pi 40-pin GPIO Header"))
    )
    (comp (ref "J2")
      (value "Barrel_Jack")
      (footprint "Connector_BarrelJack:BarrelJack_CUI_PJ-002A_Horizontal")
      (fields (field (name "Description") "12V DC Power Input 5.5x2.1mm"))
    )
    (comp (ref "J3")
      (value "Wiegand")
      (footprint "TerminalBlock_Phoenix:TerminalBlock_Phoenix_MKDS-1,5-4-5.08_1x04_P5.08mm_Horizontal")
      (fields (field (name "Description") "Wiegand Reader: D0, D1, 5V, GND"))
    )
    (comp (ref "J4")
      (value "RS485")
      (footprint "TerminalBlock_Phoenix:TerminalBlock_Phoenix_MKDS-1,5-4-5.08_1x04_P5.08mm_Horizontal")
      (fields (field (name "Description") "RS-485 OSDP: A+, B-, GND, Shield"))
    )
    (comp (ref "J5")
      (value "PN532_I2C")
      (footprint "Connector_PinHeader_2.54mm:PinHeader_1x06_P2.54mm_Vertical")
      (fields (field (name "Description") "PN532 I2C: VCC, GND, SDA, SCL, IRQ, RST"))
    )
    (comp (ref "J6")
      (value "NFC_SPI")
      (footprint "Connector_PinHeader_2.54mm:PinHeader_1x08_P2.54mm_Vertical")
      (fields (field (name "Description") "NFC SPI: VCC, GND, SCK, MISO, MOSI, CS, RST, IRQ"))
    )
    (comp (ref "J7")
      (value "Relay_Out")
      (footprint "TerminalBlock_Phoenix:TerminalBlock_Phoenix_MKDS-1,5-3-5.08_1x03_P5.08mm_Horizontal")
      (fields (field (name "Description") "Relay Output: NO, COM, NC"))
    )
    (comp (ref "J8")
      (value "Door_Sensor")
      (footprint "TerminalBlock_Phoenix:TerminalBlock_Phoenix_MKDS-1,5-2-5.08_1x02_P5.08mm_Horizontal")
      (fields (field (name "Description") "Door Sensor Input (Isolated)"))
    )
    (comp (ref "J9")
      (value "REX_Button")
      (footprint "TerminalBlock_Phoenix:TerminalBlock_Phoenix_MKDS-1,5-2-5.08_1x02_P5.08mm_Horizontal")
      (fields (field (name "Description") "Request to Exit Button"))
    )
    (comp (ref "J10")
      (value "Tamper")
      (footprint "Connector_PinHeader_2.54mm:PinHeader_1x02_P2.54mm_Vertical")
      (fields (field (name "Description") "Tamper Switch Input"))
    )
    (comp (ref "J11")
      (value "Buzzer")
      (footprint "TerminalBlock_Phoenix:TerminalBlock_Phoenix_MKDS-1,5-2-5.08_1x02_P5.08mm_Horizontal")
      (fields (field (name "Description") "External Buzzer Output"))
    )
    (comp (ref "U1")
      (value "OKI-78SR-5")
      (footprint "Converter_DCDC:Converter_DCDC_muRata_OKI-78SRx_Vertical")
      (datasheet "https://power.murata.com/data/power/oki-78sr.pdf")
      (fields (field (name "Description") "DC-DC 5V 1.5A Step-Down"))
    )
    (comp (ref "U2")
      (value "LD1117S33")
      (footprint "Package_TO_SOT_SMD:SOT-223-3_TabPin2")
      (datasheet "https://www.st.com/resource/en/datasheet/ld1117.pdf")
      (fields (field (name "Description") "3.3V LDO Regulator"))
    )
    (comp (ref "U3")
      (value "MAX13487E")
      (footprint "Package_SO:SOIC-8_3.9x4.9mm_P1.27mm")
      (datasheet "https://datasheets.maximintegrated.com/en/ds/MAX13487E.pdf")
      (fields (field (name "Description") "RS-485 Transceiver Auto-Direction"))
    )
    (comp (ref "U4")
      (value "TXB0102")
      (footprint "Package_TO_SOT_SMD:SOT-23-6")
      (datasheet "https://www.ti.com/lit/ds/symlink/txb0102.pdf")
      (fields (field (name "Description") "2-Bit Bidirectional Level Shifter"))
    )
    (comp (ref "U5")
      (value "PC817")
      (footprint "Package_DIP:DIP-4_W7.62mm")
      (fields (field (name "Description") "Optocoupler for Door Sensor"))
    )
    (comp (ref "Q1")
      (value "MMBT2222A")
      (footprint "Package_TO_SOT_SMD:SOT-23")
      (fields (field (name "Description") "NPN Transistor Relay Driver"))
    )
    (comp (ref "K1")
      (value "G5LE-14_DC12")
      (footprint "Relay_THT:Relay_SPDT_Omron-G5LE-14")
      (fields (field (name "Description") "12V SPDT Relay"))
    )
    (comp (ref "F1")
      (value "1.1A")
      (footprint "Fuse:Fuse_1812_4532Metric")
      (fields (field (name "Description") "Polyfuse 1812L110"))
    )
    (comp (ref "D1")
      (value "SMBJ24A")
      (footprint "Diode_SMD:D_SMB")
      (fields (field (name "Description") "TVS 24V Power Protection"))
    )
    (comp (ref "D2")
      (value "PESD5V0S1BL")
      (footprint "Diode_SMD:D_SOD-323")
      (fields (field (name "Description") "TVS 5V ESD Wiegand D0"))
    )
    (comp (ref "D3")
      (value "PESD5V0S1BL")
      (footprint "Diode_SMD:D_SOD-323")
      (fields (field (name "Description") "TVS 5V ESD Wiegand D1"))
    )
    (comp (ref "D4")
      (value "SM712")
      (footprint "Package_TO_SOT_SMD:SOT-23")
      (fields (field (name "Description") "TVS RS-485 A Line"))
    )
    (comp (ref "D5")
      (value "SM712")
      (footprint "Package_TO_SOT_SMD:SOT-23")
      (fields (field (name "Description") "TVS RS-485 B Line"))
    )
    (comp (ref "D6")
      (value "1N4148W")
      (footprint "Diode_SMD:D_SOD-123")
      (fields (field (name "Description") "Flyback Diode Relay"))
    )
    (comp (ref "D7")
      (value "SS34")
      (footprint "Diode_SMD:D_SMA")
      (fields (field (name "Description") "Schottky Reverse Protection"))
    )
    (comp (ref "D8")
      (value "LED_Green")
      (footprint "LED_SMD:LED_0805_2012Metric")
      (fields (field (name "Description") "Power LED"))
    )
    (comp (ref "D9")
      (value "LED_Green")
      (footprint "LED_SMD:LED_0805_2012Metric")
      (fields (field (name "Description") "Access Granted LED"))
    )
    (comp (ref "D10")
      (value "LED_Red")
      (footprint "LED_SMD:LED_0805_2012Metric")
      (fields (field (name "Description") "Access Denied LED"))
    )
    (comp (ref "D11")
      (value "LED_Yellow")
      (footprint "LED_SMD:LED_0805_2012Metric")
      (fields (field (name "Description") "Activity LED"))
    )
    (comp (ref "C1")
      (value "100uF")
      (footprint "Capacitor_THT:CP_Radial_D8.0mm_P3.50mm")
      (fields (field (name "Description") "Bulk Input Cap 35V"))
    )
    (comp (ref "C2")
      (value "100uF")
      (footprint "Capacitor_THT:CP_Radial_D6.3mm_P2.50mm")
      (fields (field (name "Description") "Bulk 5V Cap 10V"))
    )
    (comp (ref "C3")
      (value "10uF")
      (footprint "Capacitor_SMD:C_0805_2012Metric")
      (fields (field (name "Description") "Ceramic Cap"))
    )
    (comp (ref "C4")
      (value "10uF")
      (footprint "Capacitor_SMD:C_0805_2012Metric")
      (fields (field (name "Description") "Ceramic Cap"))
    )
    (comp (ref "C5")
      (value "10uF")
      (footprint "Capacitor_SMD:C_0805_2012Metric")
      (fields (field (name "Description") "Ceramic Cap 3.3V In"))
    )
    (comp (ref "C6")
      (value "10uF")
      (footprint "Capacitor_SMD:C_0805_2012Metric")
      (fields (field (name "Description") "Ceramic Cap 3.3V Out"))
    )
    (comp (ref "C7")
      (value "100nF")
      (footprint "Capacitor_SMD:C_0603_1608Metric")
      (fields (field (name "Description") "Bypass Cap"))
    )
    (comp (ref "C8")
      (value "100nF")
      (footprint "Capacitor_SMD:C_0603_1608Metric")
      (fields (field (name "Description") "Bypass Cap"))
    )
    (comp (ref "R1")
      (value "10k")
      (footprint "Resistor_SMD:R_0603_1608Metric")
      (fields (field (name "Description") "Wiegand D0 Pull-up"))
    )
    (comp (ref "R2")
      (value "10k")
      (footprint "Resistor_SMD:R_0603_1608Metric")
      (fields (field (name "Description") "Wiegand D1 Pull-up"))
    )
    (comp (ref "R3")
      (value "100")
      (footprint "Resistor_SMD:R_0603_1608Metric")
      (fields (field (name "Description") "Wiegand D0 Series ESD"))
    )
    (comp (ref "R4")
      (value "100")
      (footprint "Resistor_SMD:R_0603_1608Metric")
      (fields (field (name "Description") "Wiegand D1 Series ESD"))
    )
    (comp (ref "R5")
      (value "1k")
      (footprint "Resistor_SMD:R_0603_1608Metric")
      (fields (field (name "Description") "Transistor Base"))
    )
    (comp (ref "R6")
      (value "1k")
      (footprint "Resistor_SMD:R_0603_1608Metric")
      (fields (field (name "Description") "Optocoupler LED"))
    )
    (comp (ref "R7")
      (value "10k")
      (footprint "Resistor_SMD:R_0603_1608Metric")
      (fields (field (name "Description") "Door Sensor Pull-up"))
    )
    (comp (ref "R8")
      (value "10k")
      (footprint "Resistor_SMD:R_0603_1608Metric")
      (fields (field (name "Description") "REX Pull-up"))
    )
    (comp (ref "R9")
      (value "10k")
      (footprint "Resistor_SMD:R_0603_1608Metric")
      (fields (field (name "Description") "Tamper Pull-up"))
    )
    (comp (ref "R10")
      (value "1k")
      (footprint "Resistor_SMD:R_0603_1608Metric")
      (fields (field (name "Description") "Power LED Resistor"))
    )
    (comp (ref "R11")
      (value "330")
      (footprint "Resistor_SMD:R_0603_1608Metric")
      (fields (field (name "Description") "Granted LED Resistor"))
    )
    (comp (ref "R12")
      (value "220")
      (footprint "Resistor_SMD:R_0603_1608Metric")
      (fields (field (name "Description") "Denied LED Resistor"))
    )
    (comp (ref "R13")
      (value "330")
      (footprint "Resistor_SMD:R_0603_1608Metric")
      (fields (field (name "Description") "Activity LED Resistor"))
    )
    (comp (ref "H1")
      (value "MountingHole")
      (footprint "MountingHole:MountingHole_2.7mm_M2.5")
      (fields (field (name "Description") "Pi HAT Mounting Hole"))
    )
    (comp (ref "H2")
      (value "MountingHole")
      (footprint "MountingHole:MountingHole_2.7mm_M2.5")
      (fields (field (name "Description") "Pi HAT Mounting Hole"))
    )
    (comp (ref "H3")
      (value "MountingHole")
      (footprint "MountingHole:MountingHole_2.7mm_M2.5")
      (fields (field (name "Description") "Pi HAT Mounting Hole"))
    )
    (comp (ref "H4")
      (value "MountingHole")
      (footprint "MountingHole:MountingHole_2.7mm_M2.5")
      (fields (field (name "Description") "Pi HAT Mounting Hole"))
    )
  )
  (nets
    (net (code "1") (name "GND")
      (node (ref "J1") (pin "6"))
      (node (ref "J1") (pin "9"))
      (node (ref "J1") (pin "14"))
      (node (ref "J1") (pin "20"))
      (node (ref "J1") (pin "25"))
      (node (ref "J1") (pin "30"))
      (node (ref "J1") (pin "34"))
      (node (ref "J1") (pin "39"))
      (node (ref "J2") (pin "2"))
      (node (ref "J3") (pin "4"))
      (node (ref "J4") (pin "3"))
      (node (ref "J5") (pin "2"))
      (node (ref "J6") (pin "2"))
      (node (ref "U1") (pin "2"))
      (node (ref "U2") (pin "1"))
      (node (ref "U3") (pin "5"))
      (node (ref "C1") (pin "2"))
      (node (ref "C2") (pin "2"))
      (node (ref "C3") (pin "2"))
      (node (ref "C4") (pin "2"))
      (node (ref "C5") (pin "2"))
      (node (ref "C6") (pin "2"))
      (node (ref "D1") (pin "1"))
      (node (ref "D2") (pin "1"))
      (node (ref "D3") (pin "1"))
      (node (ref "D8") (pin "2"))
      (node (ref "Q1") (pin "3"))
      (node (ref "U5") (pin "4"))
    )
    (net (code "2") (name "+12V")
      (node (ref "J2") (pin "1"))
      (node (ref "F1") (pin "1"))
    )
    (net (code "3") (name "+12V_FUSED")
      (node (ref "F1") (pin "2"))
      (node (ref "D1") (pin "2"))
      (node (ref "D7") (pin "1"))
      (node (ref "C1") (pin "1"))
      (node (ref "U1") (pin "1"))
      (node (ref "K1") (pin "1"))
    )
    (net (code "4") (name "+5V")
      (node (ref "U1") (pin "3"))
      (node (ref "C2") (pin "1"))
      (node (ref "C3") (pin "1"))
      (node (ref "J1") (pin "2"))
      (node (ref "J1") (pin "4"))
      (node (ref "J3") (pin "3"))
      (node (ref "R1") (pin "1"))
      (node (ref "R2") (pin "1"))
      (node (ref "U2") (pin "3"))
      (node (ref "R10") (pin "1"))
    )
    (net (code "5") (name "+3V3")
      (node (ref "U2") (pin "2"))
      (node (ref "C5") (pin "1"))
      (node (ref "C6") (pin "1"))
      (node (ref "J1") (pin "1"))
      (node (ref "J1") (pin "17"))
      (node (ref "J5") (pin "1"))
      (node (ref "J6") (pin "1"))
      (node (ref "U3") (pin "8"))
      (node (ref "U4") (pin "1"))
      (node (ref "R7") (pin "1"))
      (node (ref "R8") (pin "1"))
      (node (ref "R9") (pin "1"))
      (node (ref "C7") (pin "1"))
      (node (ref "C8") (pin "1"))
    )
    (net (code "6") (name "WIEG_D0")
      (node (ref "J3") (pin "1"))
      (node (ref "R3") (pin "1"))
      (node (ref "D2") (pin "2"))
    )
    (net (code "7") (name "WIEG_D0_PROT")
      (node (ref "R3") (pin "2"))
      (node (ref "R1") (pin "2"))
      (node (ref "U4") (pin "3"))
    )
    (net (code "8") (name "GPIO24_D0")
      (node (ref "U4") (pin "4"))
      (node (ref "J1") (pin "18"))
    )
    (net (code "9") (name "WIEG_D1")
      (node (ref "J3") (pin "2"))
      (node (ref "R4") (pin "1"))
      (node (ref "D3") (pin "2"))
    )
    (net (code "10") (name "WIEG_D1_PROT")
      (node (ref "R4") (pin "2"))
      (node (ref "R2") (pin "2"))
      (node (ref "U4") (pin "5"))
    )
    (net (code "11") (name "GPIO23_D1")
      (node (ref "U4") (pin "6"))
      (node (ref "J1") (pin "16"))
    )
    (net (code "12") (name "RS485_A")
      (node (ref "J4") (pin "1"))
      (node (ref "D4") (pin "1"))
      (node (ref "U3") (pin "6"))
    )
    (net (code "13") (name "RS485_B")
      (node (ref "J4") (pin "2"))
      (node (ref "D5") (pin "1"))
      (node (ref "U3") (pin "7"))
    )
    (net (code "14") (name "GPIO14_TX")
      (node (ref "J1") (pin "8"))
      (node (ref "U3") (pin "4"))
    )
    (net (code "15") (name "GPIO15_RX")
      (node (ref "J1") (pin "10"))
      (node (ref "U3") (pin "1"))
    )
    (net (code "16") (name "GPIO18_RELAY")
      (node (ref "J1") (pin "12"))
      (node (ref "R5") (pin "1"))
    )
    (net (code "17") (name "RELAY_BASE")
      (node (ref "R5") (pin "2"))
      (node (ref "Q1") (pin "1"))
    )
    (net (code "18") (name "RELAY_COIL")
      (node (ref "Q1") (pin "2"))
      (node (ref "K1") (pin "2"))
      (node (ref "D6") (pin "1"))
    )
    (net (code "19") (name "RELAY_NO")
      (node (ref "K1") (pin "3"))
      (node (ref "J7") (pin "1"))
    )
    (net (code "20") (name "RELAY_COM")
      (node (ref "K1") (pin "4"))
      (node (ref "J7") (pin "2"))
    )
    (net (code "21") (name "RELAY_NC")
      (node (ref "K1") (pin "5"))
      (node (ref "J7") (pin "3"))
    )
    (net (code "22") (name "DOOR_SENSOR_IN")
      (node (ref "J8") (pin "1"))
      (node (ref "R6") (pin "1"))
    )
    (net (code "23") (name "OPTO_LED")
      (node (ref "R6") (pin "2"))
      (node (ref "U5") (pin "1"))
    )
    (net (code "24") (name "DOOR_SENSOR_GND")
      (node (ref "J8") (pin "2"))
      (node (ref "U5") (pin "2"))
    )
    (net (code "25") (name "GPIO27_DOOR")
      (node (ref "J1") (pin "13"))
      (node (ref "U5") (pin "3"))
      (node (ref "R7") (pin "2"))
    )
    (net (code "26") (name "REX_IN")
      (node (ref "J9") (pin "1"))
    )
    (net (code "27") (name "GPIO17_REX")
      (node (ref "J1") (pin "11"))
      (node (ref "R8") (pin "2"))
      (node (ref "J9") (pin "2"))
    )
    (net (code "28") (name "TAMPER_IN")
      (node (ref "J10") (pin "1"))
    )
    (net (code "29") (name "GPIO6_TAMPER")
      (node (ref "J1") (pin "31"))
      (node (ref "R9") (pin "2"))
      (node (ref "J10") (pin "2"))
    )
    (net (code "30") (name "I2C_SDA")
      (node (ref "J1") (pin "3"))
      (node (ref "J5") (pin "3"))
    )
    (net (code "31") (name "I2C_SCL")
      (node (ref "J1") (pin "5"))
      (node (ref "J5") (pin "4"))
    )
    (net (code "32") (name "GPIO16_IRQ")
      (node (ref "J1") (pin "36"))
      (node (ref "J5") (pin "5"))
      (node (ref "J6") (pin "8"))
    )
    (net (code "33") (name "GPIO25_RST")
      (node (ref "J1") (pin "22"))
      (node (ref "J5") (pin "6"))
      (node (ref "J6") (pin "7"))
    )
    (net (code "34") (name "SPI_SCLK")
      (node (ref "J1") (pin "23"))
      (node (ref "J6") (pin "3"))
    )
    (net (code "35") (name "SPI_MISO")
      (node (ref "J1") (pin "21"))
      (node (ref "J6") (pin "4"))
    )
    (net (code "36") (name "SPI_MOSI")
      (node (ref "J1") (pin "19"))
      (node (ref "J6") (pin "5"))
    )
    (net (code "37") (name "SPI_CE0")
      (node (ref "J1") (pin "24"))
      (node (ref "J6") (pin "6"))
    )
    (net (code "38") (name "GPIO25_LED_OK")
      (node (ref "J1") (pin "22"))
      (node (ref "R11") (pin "1"))
    )
    (net (code "39") (name "LED_OK_ANODE")
      (node (ref "R11") (pin "2"))
      (node (ref "D9") (pin "1"))
    )
    (net (code "40") (name "GPIO22_LED_ERR")
      (node (ref "J1") (pin "15"))
      (node (ref "R12") (pin "1"))
    )
    (net (code "41") (name "LED_ERR_ANODE")
      (node (ref "R12") (pin "2"))
      (node (ref "D10") (pin "1"))
    )
    (net (code "42") (name "GPIO12_BUZZER")
      (node (ref "J1") (pin "32"))
      (node (ref "J11") (pin "1"))
    )
    (net (code "43") (name "BUZZER_GND")
      (node (ref "J11") (pin "2"))
    )
    (net (code "44") (name "PWR_LED")
      (node (ref "R10") (pin "2"))
      (node (ref "D8") (pin "1"))
    )
    (net (code "45") (name "GPIO13_LED_ACT")
      (node (ref "J1") (pin "33"))
      (node (ref "R13") (pin "1"))
    )
    (net (code "46") (name "LED_ACT_ANODE")
      (node (ref "R13") (pin "2"))
      (node (ref "D11") (pin "1"))
    )
    (net (code "47") (name "LED_ACT_CATHODE")
      (node (ref "D11") (pin "2"))
    )
    (net (code "48") (name "LED_ERR_CATHODE")
      (node (ref "D10") (pin "2"))
    )
    (net (code "49") (name "LED_OK_CATHODE")
      (node (ref "D9") (pin "2"))
    )
  )
)
